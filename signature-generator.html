<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Signature Generator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 40px auto; padding: 20px; background-color: #f5f5f5; }
        .container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 10px; }
        .instructions { color: #666; margin-bottom: 30px; padding: 15px; background-color: #e8f4f8; border-radius: 4px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box; }
        button { background-color: #1a73e8; color: white; padding: 12px 30px; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; margin-right: 10px; }
        button:hover { background-color: #1557b0; }
        #copyButton { background-color: #34a853; }
        #copyButton:hover { background-color: #2d8e47; }
        #signaturePreview { margin-top: 30px; padding: 20px; border: 2px dashed #ddd; border-radius: 4px; background-color: #fafafa; }
        .success-message { display: none; margin-top: 10px; padding: 10px; background-color: #d4edda; color: #155724; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Email Signature Generator</h1>
        <div class="instructions">
            <strong>Instructions:</strong><br>
            1. Fill in your details<br>
            2. Click "Generate Signature"<br>
            3. Click "Copy Signature"<br>
            4. Paste in Gmail Settings → General → Signature
        </div>
        <form id="signatureForm">
            <div class="form-group">
                <label>First Name *</label>
                <input type="text" id="firstName" required placeholder="Katie">
            </div>
            <div class="form-group">
                <label>Last Name *</label>
                <input type="text" id="lastName" required placeholder="Smith">
            </div>
            <div class="form-group">
                <label>Job Title *</label>
                <input type="text" id="role" required placeholder="Marketing Specialist">
            </div>
            <div class="form-group">
                <label>Email (Automattic.com) *</label>
                <input type="text" id="email" required placeholder="you@automattic.com">
            </div>
            <div class="form-group">
                <label>Photo URL (optional)</label>
                <div style="display: flex; gap: 10px;">
                    <input type="url" id="avatarUrl" placeholder="https://example.com/photo.jpg" style="flex: 1;">
                    <button type="button" id="gravatarBtn" style="white-space: nowrap; padding: 10px 20px; margin: 0;">Get from Gravatar</button>
                </div>
                <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">Click "Get from Gravatar" to auto-fill using your email</small>
            </div>
            <div>
                <button type="submit">Generate Signature</button>
                <button type="button" id="copyButton" style="display:none;">Copy Signature</button>
            </div>
        </form>
        <div id="signaturePreview"></div>
        <div class="success-message" id="successMessage">Copied! Paste in Gmail Settings</div>
    </div>
    <script>
        // MD5 hash function for Gravatar
        function md5(string) {
            function RotateLeft(lValue, iShiftBits) {
                return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));
            }
            function AddUnsigned(lX,lY) {
                var lX4,lY4,lX8,lY8,lResult;
                lX8 = (lX & 0x80000000);
                lY8 = (lY & 0x80000000);
                lX4 = (lX & 0x40000000);
                lY4 = (lY & 0x40000000);
                lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);
                if (lX4 & lY4) return (lResult ^ 0x80000000 ^ lX8 ^ lY8);
                if (lX4 | lY4) {
                    if (lResult & 0x40000000) return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);
                    else return (lResult ^ 0x40000000 ^ lX8 ^ lY8);
                } else return (lResult ^ lX8 ^ lY8);
            }
            function F(x,y,z) { return (x & y) | ((~x) & z); }
            function G(x,y,z) { return (x & z) | (y & (~z)); }
            function H(x,y,z) { return (x ^ y ^ z); }
            function I(x,y,z) { return (y ^ (x | (~z))); }
            function FF(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            };
            function GG(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            };
            function HH(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            };
            function II(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            };
            function ConvertToWordArray(string) {
                var lWordCount;
                var lMessageLength = string.length;
                var lNumberOfWords_temp1=lMessageLength + 8;
                var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;
                var lNumberOfWords = (lNumberOfWords_temp2+1)*16;
                var lWordArray=Array(lNumberOfWords-1);
                var lBytePosition = 0;
                var lByteCount = 0;
                while ( lByteCount < lMessageLength ) {
                    lWordCount = (lByteCount-(lByteCount % 4))/4;
                    lBytePosition = (lByteCount % 4)*8;
                    lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount)<<lBytePosition));
                    lByteCount++;
                }
                lWordCount = (lByteCount-(lByteCount % 4))/4;
                lBytePosition = (lByteCount % 4)*8;
                lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);
                lWordArray[lNumberOfWords-2] = lMessageLength<<3;
                lWordArray[lNumberOfWords-1] = lMessageLength>>>29;
                return lWordArray;
            };
            function WordToHex(lValue) {
                var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;
                for (lCount = 0;lCount<=3;lCount++) {
                    lByte = (lValue>>>(lCount*8)) & 255;
                    WordToHexValue_temp = "0" + lByte.toString(16);
                    WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);
                }
                return WordToHexValue;
            };
            function Utf8Encode(string) {
                string = string.replace(/\r\n/g,"\n");
                var utftext = "";
                for (var n = 0; n < string.length; n++) {
                    var c = string.charCodeAt(n);
                    if (c < 128) {
                        utftext += String.fromCharCode(c);
                    }
                    else if((c > 127) && (c < 2048)) {
                        utftext += String.fromCharCode((c >> 6) | 192);
                        utftext += String.fromCharCode((c & 63) | 128);
                    }
                    else {
                        utftext += String.fromCharCode((c >> 12) | 224);
                        utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                        utftext += String.fromCharCode((c & 63) | 128);
                    }
                }
                return utftext;
            };
            var x=Array();
            var k,AA,BB,CC,DD,a,b,c,d;
            var S11=7, S12=12, S13=17, S14=22;
            var S21=5, S22=9 , S23=14, S24=20;
            var S31=4, S32=11, S33=16, S34=23;
            var S41=6, S42=10, S43=15, S44=21;
            string = Utf8Encode(string);
            x = ConvertToWordArray(string);
            a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;
            for (k=0;k<x.length;k+=16) {
                AA=a; BB=b; CC=c; DD=d;
                a=FF(a,b,c,d,x[k+0], S11,0xD76AA478);
                d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);
                c=FF(c,d,a,b,x[k+2], S13,0x242070DB);
                b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);
                a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);
                d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);
                c=FF(c,d,a,b,x[k+6], S13,0xA8304613);
                b=FF(b,c,d,a,x[k+7], S14,0xFD469501);
                a=FF(a,b,c,d,x[k+8], S11,0x698098D8);
                d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);
                c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);
                b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);
                a=FF(a,b,c,d,x[k+12],S11,0x6B901122);
                d=FF(d,a,b,c,x[k+13],S12,0xFD987193);
                c=FF(c,d,a,b,x[k+14],S13,0xA679438E);
                b=FF(b,c,d,a,x[k+15],S14,0x49B40821);
                a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);
                d=GG(d,a,b,c,x[k+6], S22,0xC040B340);
                c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);
                b=GG(b,c,d,a,x[k+0], S24,0xE9B6C7AA);
                a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);
                d=GG(d,a,b,c,x[k+10],S22,0x2441453);
                c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);
                b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);
                a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);
                d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);
                c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);
                b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);
                a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);
                d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);
                c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);
                b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);
                a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);
                d=HH(d,a,b,c,x[k+8], S32,0x8771F681);
                c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);
                b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);
                a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);
                d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);
                c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);
                b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);
                a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);
                d=HH(d,a,b,c,x[k+0], S32,0xEAA127FA);
                c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);
                b=HH(b,c,d,a,x[k+6], S34,0x4881D05);
                a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);
                d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);
                c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);
                b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);
                a=II(a,b,c,d,x[k+0], S41,0xF4292244);
                d=II(d,a,b,c,x[k+7], S42,0x432AFF97);
                c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);
                b=II(b,c,d,a,x[k+5], S44,0xFC93A039);
                a=II(a,b,c,d,x[k+12],S41,0x655B59C3);
                d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);
                c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);
                b=II(b,c,d,a,x[k+1], S44,0x85845DD1);
                a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);
                d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);
                c=II(c,d,a,b,x[k+6], S43,0xA3014314);
                b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);
                a=II(a,b,c,d,x[k+4], S41,0xF7537E82);
                d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);
                c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);
                b=II(b,c,d,a,x[k+9], S44,0xEB86D391);
                a=AddUnsigned(a,AA);
                b=AddUnsigned(b,BB);
                c=AddUnsigned(c,CC);
                d=AddUnsigned(d,DD);
            }
            var temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);
            return temp.toLowerCase();
        }

        // Gravatar button handler
        document.getElementById('gravatarBtn').addEventListener('click', function() {
            const email = document.getElementById('email').value.trim();
            if (!email) {
                alert('Please enter an email address first');
                return;
            }
            const hash = md5(email.toLowerCase());
            const gravatarUrl = 'https://www.gravatar.com/avatar/' + hash + '?s=200&d=mp';
            document.getElementById('avatarUrl').value = gravatarUrl;
            alert('Gravatar URL loaded! If no image appears in preview, this email may not have a Gravatar profile.');
        });

        document.getElementById('signatureForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const role = document.getElementById('role').value;
            const email = document.getElementById('email').value;
            const avatarUrl = document.getElementById('avatarUrl').value || 'https://via.placeholder.com/90';
            
            const sig = '<div style="font-family: sans-serif; line-height: 1.2;" dir="auto" data-top-level="true"><table cellpadding="0" cellspacing="0" border="0" style="border:none;font-size:14px;line-height:1.2;"><tbody><tr><td style="vertical-align:top; padding:10px 35px 10px 0;"><div style="margin:10px 0 3px 0"><img src="' + avatarUrl + '" width="90" style="display:block; border-radius:50%;margin:auto;" alt="User profile picture"></div><div><img src="https://45522507.fs1.hubspotusercontent-na1.net/hubfs/45522507/hubspot-agencies-sm-screen.png" role="presentation" style="max-width:100px; display:inline-block;" width="100" alt="Automattic for Agencies logo"></div></td><td style="padding:10px 0;"><p style="margin:0 0 4px 0; font-size:18px; font-weight:bold; line-height:1.1;"><span>' + firstName + '</span> <span>' + lastName + '</span></p><p style="margin:0 0 2px 0; line-height:1.2;">' + role + '</p><p style="margin:0 0 8px 0; line-height:1.2;"><strong>Automattic for Agencies</strong></p><hr style="color:#39c;background-color:#39c;border-width:0;height:2px;margin:8px 0 8px 0;"><p style="margin:0 0 4px 0; font-size:14px; line-height:1.2;"><img src="https://cdn2.hubspot.net/hubfs/53/tools/email-signature-generator/icons/email-icon-dark-2x.png" alt="email" width="14" height="14" style="display:inline-block;vertical-align:middle;margin-bottom:3px;background-color:#39c;width:14px;height:14px"><a href="mailto:' + email + '" style="color:#000;font-weight:400;text-decoration:none;padding-left:6px">' + email + '</a></p><p style="margin:0; font-size:14px; line-height:1.2;"><img src="https://cdn2.hubspot.net/hubfs/53/tools/email-signature-generator/icons/link-icon-dark-2x.png" alt="website" width="14" height="14" style="display:inline-block; vertical-align:middle;margin-bottom:4px;background-color:#39c;width:14px;height:14px"><a href="https://automattic.com/for-agencies/" style="color:#000;font-weight:400;text-decoration:none;padding-left:6px;">https://automattic.com/for-agencies</a></p></td></tr></tbody></table></div>';
            
            document.getElementById('signaturePreview').innerHTML = '<div style="margin-bottom:15px;font-weight:bold;">Preview:</div>' + sig;
            document.getElementById('copyButton').style.display = 'inline-block';
        });
        document.getElementById('copyButton').addEventListener('click', function() {
            const sig = document.querySelector('#signaturePreview div[dir="auto"]');
            if (sig) {
                const range = document.createRange();
                range.selectNode(sig);
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
                document.execCommand('copy');
                document.getElementById('successMessage').style.display = 'block';
                setTimeout(() => document.getElementById('successMessage').style.display = 'none', 3000);
                window.getSelection().removeAllRanges();
            }
        });
    </script>
</body>
</html>
